[
["index.html", "TSL Galaxy Hand Book 1 Preface 1.1 Introduction to Galaxy 1.2 Prerequisites 1.3 Accessing TSL Galaxy", " TSL Galaxy Hand Book Ram Krishna Shrestha 2017-03-29 1 Preface The purpose of this handbook is to give a new user an introduction to the Galaxy environment for bioinformatics. This handbook will introduce you to the TSL Galaxy installation, it’s basic functionality, show you how to do some straightforward data manipulation and analysis, visualization and creating workflows. 1.1 Introduction to Galaxy Galaxy is a framework for integrating computational tools. It allows nearly any tool that can be run from the command line to be wrapped in a well-defined interface. On top of these tools, Galaxy provides an accessible environment for interactive analysis that transparently tracks the details of analysis steps, a workflow system for convenient reuse, data management, sharing, and publishing. Galaxy is available as an open, web-based platform for data intensive life science research that enables non-bioinformaticians to create, run, tune and share their own bioinformatic analyses. Galaxy can be used on a local desktop computer, in a network server or on cloud based server. 1.2 Prerequisites There are no formal prerequisites for this. To access TSL Galaxy, you will need to be on the NBI site (or accessing via VPN). 1.3 Accessing TSL Galaxy 1.3.1 Registration First, you will need to a registered TSL account or a TSL email ID. Then, you will need to email Dan MacLean (Head of Bioinformatics), Ram Krishna Shrestha (Bioinformatics support) and Martin Page (web developer) with a request to access TSL galaxy. We will then add your TSL account/Email to the TSL Galaxy user group and let you know. Now, you are ready to login. 1.3.2 Login to TSL Galaxy Go to galaxy.tsl.ac.uk in your web browser, which will take you to login page. Enter your TSL username or TSL email id and then the password. "],
["galaxy-web-interface.html", "2 Galaxy web interface 2.1 About this chapter 2.2 Galaxy Web Interface", " 2 Galaxy web interface 2.1 About this chapter Questions How does Galaxy web interface look? What does Galaxy web interface contain? Objective Become familiar with Galaxy web interaface 2.2 Galaxy Web Interface After successful login, you will see a galaxy web interface. An example of a galaxy web interface is shown below: Galaxy Web Interface There are three sections in the galaxy web interface. The left column contains links to the downloading, preparation and analysis tools. The center column is where the menus and data will appear. The right hand column shows the history of analysis steps, allows to view data and results, and more (see figure below). Following figure shows different layouts of galaxy web interface. Galaxy Web Interface "],
["getting-started.html", "3 Getting started 3.1 About this chapter 3.2 What is a History? 3.3 Create a new history", " 3 Getting started 3.1 About this chapter Questions How to get started? What is a history? Objectives Create a new history To rename a history 3.2 What is a History? A history is a systematic record of your data analysis steps. Galaxy provides a numerical record of every analysis step you do starting from 1. The uploaded file or an output file from a tool are all numerically recorded in a history. 3.3 Create a new history When a user logins for the first time, the user has no any history. Let’s create a new history. To create a new history, follow the figures below: A new history is created. By default, the history name is unnamed history. Double click on the unnamed history and type in the name of the analysis you want it to be. It is wise to name the history by the type of the project and analysis you are doing e.g. RNAseq_snpcalling. "],
["uploading-raw-data.html", "4 Uploading raw data 4.1 About this Chapter 4.2 Upload local data to galaxy 4.3 Upload data from datahog to galaxy 4.4 Upload data from internet", " 4 Uploading raw data 4.1 About this Chapter 4.1.1 Questions How to upload your local data to galaxy? How to upload your data from datahog (data.tsl.ac.uk) to galaxy? 4.1.2 Objectives Uploading local data to galaxy Uploading your data in datahog to galaxy 4.2 Upload local data to galaxy Users can upload raw data on their local computer drive by any one method as shown in the figures below. or In the next step, Galaxy asks you some the type of the data (e.g. fasta/fastq/fastqsanger/vcf etc). If your data is generated in the modern sequencing platforms, choose fastqsanger as the data type. This will avoid running fastq groomer tool later. Click on the Choose local file button and then browse the data file to select your data. The selected file will be listed. You can choose more local files by clicking choose local file button. When you are ready to upload, click the start button. Galaxy will start uploading the selected data. As galaxy start uploading, on the history panel on the right shows the filename. When the job is in pending state, the background color is grey, when it is uploading or processing, the background appears in yellow and after completion it appears in green background. While the data are in upload process, click on the close button if you wish to close the window box. 4.3 Upload data from datahog to galaxy Data generated for TSL projects are stored in TSL datahog ( data.tsl.ac.uk ). You can access the datahog from galaxy. At the horizontal menu list at the top, click on the menu Shared Data and then select Data Libraries. Select /tsl/data/reads and then your group. Go on browsing to the file you want and then select it. You can select multiple files as well. If you want to select all files in a folder, just select the folder. After your seelction, click to History button. Choose your history name. If you have many histories, click the drop down list and select the one you are working on. Then click import button. The data file imported is now listed in the history. If the file is huge in size, the process of importing it may take some time and during this time, the background of the filename will be yellow in color. After the importing is completed successfully, the background color will be green. 4.4 Upload data from internet Data on public database like NCBI and EBI-SRA can also be upload to your galaxy history straightaway. For more information, check this weblink (https://wiki.galaxyproject.org/Support#Get_Data:_Upload) "],
["data-attributes.html", "5 Data Attributes 5.1 About this chapter 5.2 Data attributes 5.3 View data attributes 5.4 Edit data attributes 5.5 View data file contents 5.6 Add/Edit data tags 5.7 Add annotation 5.8 Download data file", " 5 Data Attributes 5.1 About this chapter 5.1.1 Questions What are data attributes? How to view data attributes? How to edit data attributes? 5.1.2 Objectives To know and view the data attributes To edit the data attributes 5.2 Data attributes Data attributes are the extra information about the data. Information like data file format, annotations/tags about the data, database linked to the data, access permission on the data etc. 5.3 View data attributes Click on a data filename in the history. The field of the data will expand down in the history. Click on the small bold i like view details button. The details of the data file will be shown in the central area. 5.4 Edit data attributes Click on edit attributes button. In the central area of galaxy web interface, the fields with data attributes will appear. You can change Attributes, Convert Format, Datatype and Permissions for the data. Make necessary changes and then save the changes. 5.5 View data file contents click on the eye button next to the filename in history to view the contents of the file. If the file is huge in size, only the first 1 MB of the data will be displayed. 5.6 Add/Edit data tags Click on the edit tag button. A new Tag field will appear. Type some keywords related to the file to help you to identify the data in the future. When you are done, click again edit tag button. The keywords are saved automatically. When you have many files in the history or many saved data files, you can search the data file using these keywords/tags. 5.7 Add annotation click on the Add Annotation button. A new field Annotation will appear. Type some description about the data that will help you to identity the data in the future. 5.8 Download data file Click a download button to download the data file. "],
["fastq-grooming.html", "6 FASTQ Grooming 6.1 About this chapter 6.2 FASTQ grooming", " 6 FASTQ Grooming 6.1 About this chapter 6.1.1 Questions What is fastq grooming? Why fastq grooming may be required? 6.1.2 Objects convert file format using fastq grooming understand necessity of fastq grooming 6.2 FASTQ grooming FASTQ grooming means converting quality score of nucleotide bases to a different format. Galaxy tools require fastq quality scores in sanger (ascii offset of 33) format. Illumina sequencing pipeline encoding quality score in illumina 1.3 to 1.7 have different quality encoding. Galaxy tools cannot find these files after uploading them. Therefore, they need to be groomed to sanger format before analysing. Check this video on fastq data grooming (https://vimeo.com/76024253). All sequencing platforms now produce sanger format quality score. You can choose datatype as “fastqsanger” while uploading raw datasets from new sequencing platforms. Note: Although a fastq dataset has sanger format quality scores, while uploading the data, if you choose the datatype as fastq, the dataset may not be available for further processing. But if you choose, datatype as fastqsanger, they are available to downstream tools for further processing. Here I show how to do FASTQ grooming. A new history Calling snps is started. Two fastq files are uploaded as datatype fastq. See figure below: "],
["fastqc.html", "7 FASTQC 7.1 About this chapter 7.2 FASTQ data quality 7.3 Why do we need data quality control? 7.4 How can we do data quality check? 7.5 How to use FASTQC tool?", " 7 FASTQC 7.1 About this chapter 7.1.1 Questions What is FASTQC? Why is FASTQ data quality check required? How to do FASTQ data quality control? 7.1.2 Objectives Know data quality Necessity of FASTQ data quality control Learn to do FASTQ data qualtiy control 7.2 FASTQ data quality Modern sequencing platforms like Illumina, 454, Pacific Biosciences etc sequences short fragments of DNA by adding a template base complementary nucleotides to an existing short oligonucleotide. Sequencing platforms record the nucleotide adding in the form of light intensities and based on that the integrated algorithms returns the best nucleotides being added along with a numerical score called phred score converted into ASCII value. The sensitivity of the sequencing platforms does not remain same throughout the sequencing process and so the nucleotide base call by the algorithms goes on decreasing. User can check the confidence of seqeunce data by looking at the quality score of each nucleotide in the sequence. An example of FASTQ data looks like this: @SEQ_ID GATTTGGGGTTCAAAGCAGTATCGATCAAATAGTAAATCCATTTGTTCAACTCACAGTTT + !‘’((((+))%%%++)(%%%%).1-+’’))**55CCF&gt;&gt;&gt;&gt;&gt;&gt;CCCCCCC65 For more information on FASTQ data quality, check these sites https://en.wikipedia.org/wiki/FASTQ_format https://support.illumina.com/help/BaseSpace_OLH_009008/Content/Source/Informatics/BS/QualityScoreEncoding_swBS.htm http://www.phrap.com/phred/ 7.3 Why do we need data quality control? As every base call in the sequence data has no confidence of being corrected, those low quality data need to trimmed out to have a high quality and confident result. Usually the base quality goes on decreasing form left hand side to right hand side of the sequences. You can set a confident threshold quality score and trim the sequences from right to left hand side. The remaining data now has high quality data only. 7.4 How can we do data quality check? A widely used tool for fastq data quality check is FASTQC. For more information on the tool, check this weblink: (http://www.bioinformatics.babraham.ac.uk/projects/fastqc/) 7.5 How to use FASTQC tool? In the tool panel, search FASTQC and then select it. The FASTQC tool options will appear in the central area. Select a one or multiple data files and click execute button. The jobs start executing as shown with yellow background in the history. See figure below: When the jobs are completed, user can click view data to check the fastq quality check results of the data files. Note: Check both output files (Rawdata, webpage) for each input data file as shown below. The links in the result page are works. User can click on the links to navigate to different sections of the result. Try to click Kmer Content link when you view webpage result. "],
["quality-trimming.html", "8 Quality Trimming 8.1 About the chapter 8.2 Quality Trimming 8.3 Quality trimming tools 8.4 How to use Trimmomatic tool", " 8 Quality Trimming 8.1 About the chapter 8.1.1 Questions What is quality trimming? Why is quality trimming required? What are the tools available for quality trimming? 8.1.2 Objectives To know quality trimming Learn quality trimming using available tools 8.2 Quality Trimming Quality trimming means cleaning the raw sequence data, removing the poor quality nucleotide bases from the sequence reads. As mentioned in the FASTQ data quality section in the previous chapter, raw data sequences have poor quality nucleotides incorporated and these poor quality bases might compromise the final result. Quality trimming ensures only the high quality data is considered for downstream analysis processes. 8.3 Quality trimming tools There are many quality trimming tools available online. Following tools are installed in TSL galaxy: * Sickle * trimmomatic * seqtk trimfq * FASTQ quality trimmer * FASTQ trimmer Trimmomatic is widely used quality trimmomatic tool and we will use the tools for the purpose of this handbook. 8.4 How to use Trimmomatic tool Select trimmomatic tool from the tool panel on the right. In the central area, the options for trimmomatic tools will appear as shown below: Select Yes or No for paired end data based on your data. Select your input FASTQ files from the history. Input other options and then select execute at the end. Check your history on the right side of the galaxy webinterface. If the job are waiting to be executed, the filenames will appear in grey background. If the jobs are running, the background color is yellow and if the jobs have completed, the background color is green. Note: Depending upon the quality trimming tool selected, the number of output filenames may differ. "],
["mapping-reads-to-a-reference-sequence.html", "9 Mapping reads to a reference sequence 9.1 About this chapter 9.2 What is sequence reads mapping? 9.3 How to do reads mapping in galaxy?", " 9 Mapping reads to a reference sequence 9.1 About this chapter 9.1.1 Questions What is reads mapping? Why is reads mapping necessary? How to do reads mapping? 9.1.2 Objectives To know reads mapping To learn mapping the reads to reference sequence 9.2 What is sequence reads mapping? Sequence reads mapping is a way of comparing how identical or different is your generated raw reads from the standard known reference sequence or the assembled sequence. Nucleotide bases insertion, deletion or substitution are common differences you see in your raw data with the reference sequence. For more information on sequence reads mapping, check the links https://en.wikipedia.org/wiki/Sequence_alignment, https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2705234/ 9.3 How to do reads mapping in galaxy? Reads mapping can be done using reads alignment softwares installed in the galaxy. In the tool panel, there is a section “NGS: Mapping”, under which are the next generation reads mapping tools like Bowtie2 and BWA. We will use bowtie here to demostrate reads mapping. Select Bowtie2 under NGS:mapping. The options for Bowtie2 appear in the central area of the galaxy webinterface as shown below: You will need to select forward and reverse reads filename if your data is paired-end or select one file with reads if your data is single end. You will need to select your reference genome is built-in genome index and it is in history. If it is not available, select the reference genome fasta file. Either built-in genome index or the reference genome fasta has to be available in the history to select. The rest of the options may be left as default and click execute at the end. The jobs start running as shown in the figure below: Depending on the size of the input files, reads mapping may take long time. After the job is completed, the output filename background color changes to green as shown below: Note: Depending upon the mapping tool selected, the number of output filenames may differ. Bowtie2 produces a BAM format alignment file. Some alignment tools produce SAM format file. We will talk about SAM and BAM files in the next chapter. "],
["samools.html", "10 SAMools 10.1 About this chapter 10.2 SAMtools 10.3 SAM and BAM formats 10.4 Using SAMtools in galaxy 10.5 Filtering aligned reads", " 10 SAMools 10.1 About this chapter 10.1.1 Questions What are SAMtools? What are SAM and BAM? Are SAM and BAM convertible? 10.1.2 Objectives Understand SAM and BAM formats Convert SAM to BAM and vice versa Using SAMtools in galaxy Filter mapped reads in the alignment 10.2 SAMtools SAM Tools provide various utilities for manipulating alignments in the SAM format, including filtering, sorting, merging, indexing and generating alignments in a per-position format. For more information on SAMtools, visit the weblink: http://www.htslib.org/doc/samtools.html 10.3 SAM and BAM formats SAM and BAM are the file formats for recording the sequence alignments. SAM stands for Sequence Alignment/Mapping and BAM is for Binary version of SAM format. For more information about the SAM format file, check this weblink: https://samtools.github.io/hts-specs/SAMv1.pdf SAM and BAM files are inter-convertible using SAMtools. Check this weblink http://www.htslib.org/doc/samtools.html 10.4 Using SAMtools in galaxy Search NGS:SAM Tools in tool panel to find BAM-to-SAM tool in the galaxy. Click the tool to display the options in the central area. 10.5 Filtering aligned reads Reads aligned in SAM/BAM file formats can be filtered for e.g. the reads are paired, get only the reads mapped between x and y points in a reference sequence, reads mapped to X chromosome in a reference or reads with quality score over 30. To filter the reads in SAM file, choose Filter SAM or BAM, output SAM or BAM tools under NGS: SAM Tools from tool panel and choose the option from drop down to apply the filter. "],
["snp-call.html", "11 SNP Call 11.1 About this chapter 11.2 What are SNPs? 11.3 How to call SNPs?", " 11 SNP Call 11.1 About this chapter 11.1.1 Questions What are SNPs? How to call SNPs? 11.1.2 Objective Calling SNPs using alignment file and reference sequence 11.2 What are SNPs? SNPs stands for Single Nucleotide Polymorphisms. SNPs are the genetic variation in the genes that are generally stable in the population. For more information on SNPs, visit the weblink: https://ghr.nlm.nih.gov/primer/genomicresearch/snp 11.3 How to call SNPs? SNPs can be called after mapping the reads to a reference sequence and generating SAM/BAM file. In galaxy, you can use mpileup followed by varscan tool to call SNPs. From the tool panel, choose Mpileup version 2.1.1 under NGS: SAM Tools and then select the BAM file as your input. See the figures below. After the mpileup job is complete, it produces a VCF file and a log file. The VCF file contains nucleotide base call from your input data at all positions in a reference sequence. Check the column POS that increases by 1 in every row. You will need to filter out the SNPs only from this file. Choose varscan version 0.1 and choose the mpileup output VCF file as input. See figure below: "],
["create-run-and-share-workflow.html", "12 Create, Run and Share Workflow 12.1 About this chapter 12.2 What is a workflow? 12.3 How to create a workflow? 12.4 Run a workflow 12.5 Share workflow", " 12 Create, Run and Share Workflow 12.1 About this chapter 12.1.1 Questions What is a workflow? How to create workflow? How to run workflow? How to share workflow? 12.1.2 Objectives Create workflow from history Run the workflow Share workflow 12.2 What is a workflow? A workflow is a series of systematic analysis steps to obtain/accomplish a specific objective. It can also be called as a pipeline. In galaxy, you upload your data and do some analysis with different tools one after another and get the result at the end. This is your workflow for that specific analysis. However, if you need to do similar analysis for a different uploaded file, you will need to follow the same steps one by one. It would be easier to tell galaxy to follow the similar analysis for different files and then sit back and relax to get the result. Yes, you can do that. You will need to create a workflow for your existing history. 12.3 How to create a workflow? In the existing history, where you have accomplished your analysis and obtained result, click History Options and select Extract Workflow. See below: A new workflow is created, after you click create workflow button. The new workflow is available in your workflow page. Click the menu workflow at the top of the webinterface. This will display your workflow page with a list of workflows. See figure below: 12.4 Run a workflow In your workflow page, click on the name of a workflow you want to run. A drop down with list of options is displayed. Select Run options to execute the workflow. You will need to upload your input reference sequence or raw read fastq files before running the workflow as input datasets are not part of workflow by default. See figures below: Select the input files for your new workflow. The options for individual tools in the workflow can be selected as well. There is an option Send results to a new history named: at the bottom, which can be selected and give a new history name to save the results in to the new history. Clicl Run workflow to start the workflow. 12.5 Share workflow In your workflow page, click on the name of a workflow you want to run. A drop down with list of options is displayed. Select Share or Publish option. See figure: You can share workflow in different ways. Option 1 “Make Workflow Accessible via Link” creates a link to the workflow and is diplayed on the same page. You can share the link to any one using the galaxy. See figure: Option 2 “Publish Workflow” makes the workflow available to any one using the galaxy unless permission is set. Option 3 “Share with a user” provides you to select a user. You can choose option 3 multiple times to add more users to share. "],
["history-management.html", "13 History Management 13.1 About this chapter 13.2 How many histories can I create? 13.3 Delete files from history 13.4 Delete a history 13.5 Switch between histories 13.6 Copy History 13.7 Copy Datasets", " 13 History Management 13.1 About this chapter 13.1.1 Questions How many histories can I create? How can I delete history? Why do I need to delete history? Switch between history 13.1.2 Objective delete analysis step/s and/or history switch between histories 13.2 How many histories can I create? You can create as many histories as you want. We covered creating a new history in chapter 3.3. When you have many histories, use history names that will help you to distinguish between the histories. 13.3 Delete files from history Output files from an analysis tool can be deleted in the current history. click a little cross icon to the right of the filename to delete the file in the current history. The filename disappears from your history. The number of deleted files is shown below the history name. See figure: Click on the deleted word under history name (as shown in figure above) to see the deleted files in the current history. Each section of deleted filename will have pink background with links to undelete it or Permanently remove it from disk. We advice to delete the file permanently if you think you don’t need the file forever. 13.4 Delete a history Deleting your history will delete your all data and analysis results with it. To delete your current history, click History Options and select delete. See figure However, deleting your history will not delete permanently from galaxy. You will be able to retrieve it in the future if you need it. In this way, the used disk space in the galaxy go on increasing and cause disk management issue in the future. We advice you to delete them permanently if you no longer use them. To delete the history permanently, select Delete Permanently in the History Options. 13.5 Switch between histories To switch to a different history, click view all histories at the top of the history. See figure This will display all your histories in columns. You can scroll to the left to view all your histories, if they all do not fit in the display. Every column with a history has a button Switch to. Select the __Switch to__button__ on your desired history and click Done at the top left corner of the display and then you are in that history. There are two search fields search histories and search all datasets at the top for you to search your history by its name and by any dataset name respectively in the history as well. 13.6 Copy History You can make a copy of a current history and then switch to the new hisotry to continue more analysis. Click History Options and select Copy History option. It will then asks you if you want to copy of the current history that includes all datasets in the original history or just the active (not deleted) datasets. See figures below: Choose an option and click copy. 13.7 Copy Datasets Click History Options and select Copy Datasets. A form for copying the data from one history to another is displayed at the center. At the left of the form, select the history with the data you want to copy and then select one or more datasets. At the right of the form, select a history from drop down or click choose multiple histories to copy data to more than one history. You can also copy the datasets to a new history. See figures below: "]
]
